# Week 4 â€” Postgres and RDS
I created an RDS instance. I was not able to connect due to postgres needing an update.
I ran apt-get update and installed postgres one more time in my workspace. 
It was in the docker compose file but somehow it was not uploaded directly.
After the installation, I was able to connect to RDS. Then we stopped and started working on the bash scripts and schema preparations.
Created new file called bin and db folders. In the bin folder we placed bash scripts. In the db folder we created schema sql and seed sql files.
In order to make our job easier we created environment variables for connecting to databases. There were two databases we created therefore we needed to use an argument when we are connecting to production database(RDS instance we created on the AWS). We have used a conditional statement to check the argument when the bash script was called by using $1. We changed the mode of script files before we ran them. Also we used real path to be able to run the files from our working directory. We were able to connnect and drop database. There were a few errors but we were able to strip the database name by using regular expressions to make sure that we were not on the database as we were trying to drop the database. We did not want to rerun everything from scratch at every start, we decided to prepare a script to run the database scripts in an order we decided. It was dropping the database, and then connecting and uploading the schema and the seed data. 
Next step was writing a post confirmation lambda trigger function to send cognito user name into RDS instance. We created RDS in a VPC and created a security group for the RDS. We realized that the security group will be changed as we stop the RDS instance. We decided to put GITPOD IP as an gitpod environment variable, so that after fetching the ip we can run a bash script to update the security group of the RDS instance inbound rule. We also gave permissions to enable congnito access to VPC. There were multiple problems. the first problem I cam up with was connection time out. Since RDS was stopped, i was not able to connect. Second problem was postgres and aws cli were not in my workspace. i had to reinstall them again. Finally, gitpod ip was not saved in the environment variables. I had to fetch the new gitpod ip and update gp variable. I ran lambda security update group. RDS was not showing any users. I uploaded the new schema. There was another problem. This time it was giving error with null value violation. I ran everything one more time. Created multiple users, checked CloudWatch Logs. Checked backend and frontend container logs. After reading forums on Discord, there was a formatting error on the lambda function. After changing our formatting we forgot to delete the f before the multiple line string. After fixing lambda function I was able to enter data into RDS. However, I was not able to see my own posts. I refered back to Discord, there were some changes on home activity component. I added user handle into home activities. I made some changes in frontend pages I was able to see my postsIt was such a great relief but I was not able to see the seed data. I tried resetting RDS one more time. DB-seed  bash script gave an error. Seed data was prepared according to the old schema and it was not macthing up. I added emails into seed data and everything started working fine.
It was quite challenging. But I learned alot and enjoyed working both on frontend and backend. 
I am finally ready to move to DynamoDB week with two days behind the schedule. 
